apiVersion: external-secrets.io/v1beta1
kind: ExternalSecret
metadata:
  name: client-info-secret
  namespace: homepage
spec:
  refreshInterval: 15m
  secretStoreRef:
    name: vault-kv-store
    kind: ClusterSecretStore
  target:
    name: homepage-config
    template:
      engineVersion: v2
      data:
        kubernetes.yaml: ""
        settings.yaml: ""
        custom.css: ""
        custom.js: ""
        bookmarks.yaml: ""

        services.yaml: |
          - Homelab:
            - Pi-hole:
                  href: "http://192.168.1.11/admin"
                  icon: pi-hole.png
                  widget:
                      type: pihole
                      url: "http://192.168.1.11"
                      # version: 6 # required if running v6 or higher, defaults to 5
                      key: {{ .piholekey }}
            - Grafana:
                  href: http://grafana.isandeshsol.com
                  icon: grafana.png

          - Consuming:
            - Hacker News:
                  href: https://news.ycombinator.com/
                  icon: hacker-news.png
            - YouTube:
                  href: https://youtube.com
                  icon: youtube.png

          - Creating:
            - X:
                  href: https://x.com
                  icon: x.png
            - LinkedIn:
                  href: https://linkedin.com
                  icon: linkedin.png

          - Misc:
            - N8n:
                  href: https://workflow.isandeshsol.com
                  icon: n8n.png
            - Claude:
                  href: https://claude.ai/new
                  icon: mdi-robot-excited-outline-#DE7552

        widgets.yaml: |
          - resources:
              cpu: true
              memory: true
              disk: /
              cputemp: true
          - search:
              provider: google
              target: _blank

        docker.yaml: ""
  data:
    - secretKey: piholekey
      remoteRef:
        key: homelab/stg
        property: pihole-key
